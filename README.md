# vigne-cla-2019
第1回ビネクラ杯ソースコード
https://vigne-cla.com/18-1/

## 実行環境
- MacBook Pro（Intel Core i7 2.7 GHz, Memory 16 GB）

## 実行方法
```
$ gcc -O2 main.c
$ ./a.out
```

## 局所的探索
- すべての発電機xと装置xのペアに重みWxを付ける
  - 装置と発電機のマンハッタン距離が短いものほど重みを大きくする
- Wxが大きい順に、発電機と装置の接続経路を探索する
  - costを0に初期化する
  - 発電機xから装置xまで1部屋ずつ経路を探していく
    - 発電機xが設置してある部屋から開始し、マンハッタン距離が短くなる次の部屋(X軸、Y軸、Z軸の3方向にある部屋)に対して接続評価を行う(*)
    - 部屋が既に経路で使われていたら接続しない
    - 部屋が空いていて、その部屋に設置されている発電機yまたは装置yがまだ接続される可能性があるならWyをcostに足しこみ、接続される可能性が無いならcostには何も足し込まない
    - 次の部屋の接続評価を行い、装置xに辿り着くまで繰り返す
  - 発電機xから装置xまでの経路の中で、costが最小なものを採用する
  - 経路が1つも見つからなかったら、(*)の箇所を全方向(X軸(+/-)、Y軸(+/-)、Z軸(+/-)の6方向)探索に変えて検索する

## 大域的探索
- 経路の一部を破壊→再構築して、より良い結果が出たら経路を更新する
  - 1 <= x1 < x2 <= 20 を満たすランダムなx1,x2を生成する
  - 同様に、y1,y2,z1,z2も生成する
  - X軸がx1〜x2、Y軸がy1〜y2、Z軸がz1〜z2に内包する部屋を通る経路をすべて削除する
  - 再び局所的探索を適用する

（本当は、GAを使ってやりたかったけど、時間が無くて妥協しました。。。）